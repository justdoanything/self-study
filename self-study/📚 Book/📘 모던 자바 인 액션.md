# ëª¨ë˜ ìë°” ì¸ ì•¡ì…˜ / ë¼ìš¸-ê²Œì´ë¸Œë¦¬ì–¼ ìš°ë¥´ë§ˆ, ë§ˆë¦¬ì˜¤ í‘¸ìŠ¤ì½”, ì•¨ëŸ° ë§ˆì´í¬ë¡œí”„íŠ¸ ì§€ìŒ / ìš°ì •ì€ ì˜®ê¹€ / í•œë¹›ë¯¸ë””ì–´

- [ì£¼ìš” ê°œë…](#ì£¼ìš”-ê°œë…)
- [ë‚´ìƒê°](#ë‚´ìƒê°)
- [ë©”ì„œë“œ ì°¸ì¡°](#ë©”ì„œë“œ-ì°¸ì¡°)
- [Sort](#sort)
- [Predicate](#predicate-filter)
- [Consumer](#consumer-foreach)
- [Function](#function-map)
- [ìƒì„±ì ì°¸ì¡°](#ìƒì„±ì-ì°¸ì¡°)
- [stream](#stream)

---

## ì£¼ìš” ê°œë…
- Stream API
  - Stream : í•œ ë²ˆì— í•œ ë²ˆì”© ë§Œë“¤ì–´ì§€ëŠ” ì—°ì†ì ì¸ ë°ì´í„° í•­ëª©ë“¤ì˜ ëª¨ì„. ì´ë¡ ì ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì€ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì—ì„œ ë°ì´í„°ë¥¼ í•œ ê°œì”© ì½ì–´ ë“¤ì´ë©° ë§ˆì°¬ê°€ì§€ë¡œ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•œ ê°œì”© ê¸°ë¡í•œë‹¤.
  - Unix ëª…ë ¹ì–´ ì¤‘ì—ì„œ `cat`ì€ ë‘ íŒŒì¼ì„ ì—°ê²°í•´ì„œ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•˜ê³  `tail -3`ì€ ìŠ¤íŠ¸ë¦¼ì˜ ë§ˆì§€ë§‰ 3ê°œ í–‰ì„ ì œê³µí•œë‹¤. `|` ì—°ì‚°ìë¡œ ì—°ê²°ë˜ ìˆëŠ” ì—¬ëŸ¬ ëª…ë ¹ì–´ëŠ” ë³‘ë ¬ì ìœ¼ë¡œ ë™ì‹œì— ìˆ˜í–‰ëœë‹¤.
  - ìë°”8ì—ì„œëŠ” `java.util.stream` íŒ¨í‚¤ì§€ì— Stream APIê°€ ì¶”ê°€ë˜ì—ˆê³  thread ë¼ëŠ” ë³µì¡í•œ ì‘ì—…ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ì„œ ê³µì§œë¡œ ë³‘ë ¬ì„±ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
- ë™ì  íŒŒë¼ë¯¸í„°í™” _`(ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ë©”ì„œë“œì˜ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥)`_ ë¡œ Methodì— Codeë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
- Interfaceì˜ Default Method
  - Collection APIì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆëŠ” ìˆ˜ë§ì€ Collection í”„ë ˆì„ì›Œí¬ê°€ ì¡´ì¬í•œë‹¤. ì´ ì¸í„°í˜ì´ìŠ¤ì— ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ëª¨ë“  í´ë˜ìŠ¤ì— ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ì•¼í•˜ëŠ” ë¬¸ì œì— ë´‰ì°©í•œë‹¤. â†’ ìë°” 8 ì—ì„œëŠ” êµ¬í˜„ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ë©”ì„œë“œë¥¼ ì¸í„°í˜ì´ìŠ¤ì— ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. â†’ Default Method
  - ìë°” 8 ì´ì „ì—ëŠ” Listë¥¼ êµ¬í˜„í•˜ëŠ” ëª¨ë“  í´ë˜ìŠ¤ê°€ sortë¥¼ êµ¬í˜„í•´ì•¼ í–ˆì§€ë§Œ ìë°” 8 ë¶€í„°ëŠ” default sortë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
    ```java
    default void sort(Comparator<? super E> c){
      Collections.sort(this, c);
    }
    ```
  - ìˆœìˆ˜ í•¨ìˆ˜, ë¶€ì‘ìš© ì—†ëŠ” í•¨ìˆ˜, ìƒíƒœ ì—†ëŠ” í•¨ìˆ˜

- Stream ë©”ì„œë“œë¡œ ì „ë‹¬í•˜ëŠ” ì½”ë“œëŠ” ë‹¤ë¥¸ ì½”ë“œì™€ ë™ì‹œì— ì‹¤í–‰í•˜ë”ë¼ë„ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ë³´í†µ ë‹¤ë¥¸ ì½”ë“œì™€ ë™ì‹œì— ì‹¤í–‰ë˜ë”ë¼ë„ ì•ˆì „í•˜ê²Œ ì‹¤í–‰í•˜ë ¤ë©´ `ê³µìœ ëœ ê°€ë³€ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.`

- `í¬í‚¹ ë‹¨ê³„` : ì˜ˆë¥¼ë“¤ì–´ ë¦¬ìŠ¤íŠ¸ë¥¼ í•„í„°ë§í•  ë•Œ í•œ CPUëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì•ë¶€ë¶„ì„ ì²˜ë¦¬í•˜ê³  ë‹¤ë¥¸ CPUëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ë’·ë¶€ë¶„ì„ ì²˜ë¦¬í•˜ë„ë¡ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.

- `í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤` : ì¶”ìƒ ë©”ì„œë“œê°€ ì˜¤ì§ í•˜ë‚˜ì¸ ì¸í„°í˜ì´ìŠ¤

- `í˜•ì‹ ê²€ì‚¬` : ê¸°ëŒ€ë˜ëŠ” ëŒë‹¤ í‘œí˜„ì˜ í˜•ì‹
  - Predicate<String> p = s -> list.add(s); // boolean ë°˜í™˜
  - Consumer<String> b = s -> list.add(s);  // boolean ë°˜í™˜
  - Object o = () -> { System.out.println("example")}; // ì—ëŸ¬ë°œìƒ
  - Object o = (Runnable) () -> { System.out.println("example")}; // ê°€ëŠ¥

- `í˜•ì‹ ì¶”ë¡ ` : ì»´íŒŒì¼ëŸ¬ëŠ” ëŒë‹¤ í‘œí˜„ì‹ì˜ íŒŒë¼ë¯¸í„° í˜•ì‹ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ëŒë‹¤ ë¬¸ë²•ì—ì„œ ìƒëµí•  ìˆ˜ ìˆë‹¤.
  - Comparator<Apple> c = (Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight()); // í˜•ì‹ ì¶”ë¡ ì„ í•˜ì§€ ì•ŠìŒ
  - Comparator<Apple> c = (a1, a2) -> a1.getWeight().compareTo(a2.getWeight()); // í˜•ì‹ ì¶”ë¡ 

- `ëŒë‹¤ ìº¡ì³ë§(ì§€ì—­ ë³€ìˆ˜ ì‚¬ìš©)` : ë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ finalë¡œ ì„ ì–¸ë˜ì–´ ìˆê±°ë‚˜ final ì²˜ëŸ¼ ê°’ì´ ë³€ê²½ë˜ì–´ì„  ì•ˆëœë‹¤.
  - ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ëŠ” í™ì— ì €ì¥ë˜ê³  ì§€ì—­ ë³€ìˆ˜ëŠ” ìŠ¤íƒì— ì €ì¥ëœë‹¤. ì›ë˜ ë³€ìˆ˜ì— ì ‘ê·¼ì„ í—ˆìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ììœ  ì§€ì—­ ë³€ìˆ˜`(íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì§„ ë³€ìˆ˜ê°€ ì•„ë‹Œ ì™¸ë¶€ì—ì„œ ì •ì˜ëœ ë³€ìˆ˜)`ì˜ ë³µì‚¬ë³µì„ ì œê³µí•œë‹¤.
  - ë”°ë¼ì„œ ë³µì‚¬ë³¸ì˜ ê°’ì´ ë°”ë€Œì§€ ì•Šì•„ì•¼ í•˜ë¯€ë¡œ ì§€ì—­ ë³€ìˆ˜ì—ëŠ” í•œ ë²ˆë§Œ ê°’ì„ í• ë‹¹í•´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ìƒê¸´ ê²ƒì´ë‹¤.

- Collectionê³¼ Stream
  - ë°ì´í„°ë¥¼ `ì–¸ì œ` ê³„ì‚°í•˜ëŠëƒì— í° ì°¨ì´ê°€ ìˆë‹¤.
  - Collection
    - í˜„ì¬ ìë£Œêµ¬ì¡°ê°€ í¬í•¨í•˜ëŠ” ëª¨ë“  ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°ì´ë‹¤. ë”°ë¼ì„œ ëª¨ë“  ìš”ì†ŒëŠ” ì¶”ê°€ë˜ê¸° ì „ì— ê³„ì‚°ë˜ì–´ì•¼ í•œë‹¤. 
    - Collectionì— ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆì§€ë§Œ ì´ëŸ° ì—°ì‚°ì„ ìˆ˜í–‰í•  ë•Œë§ˆë‹¤ ëª¨ë“  ìš”ì†Œë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì•¼ í•˜ë©° ì¶”ê°€í•˜ë ¤ëŠ” ìš”ì†ŒëŠ” ë¯¸ë¦¬ ê³„ì‚°ë˜ì–´ì•¼ í•œë‹¤.
    - ì™¸ë¶€ì ìœ¼ë¡œ ë°˜ë³µí•œë‹¤. -> í•­ëª©ì„ í•˜ë‚˜ì”© ê°€ì ¸ì™€ì„œ ì²˜ë¦¬í•œë‹¤.
  - Stream
    - ì´ë¡ ì ìœ¼ë¡œ ìš”ì²­í•  ë•Œë§Œ ìš”ì†Œë¥¼ ê³„ì‚°í•˜ëŠ” ê³ ì •ëœ ìë£Œêµ¬ì¡°ì´ë‹¤.
    - Streamì— ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•  ìˆ˜ ì—†ê³  ì‚¬ìš©ìê°€ ìš”ì²­í•˜ëŠ” ê°’ë§Œ Streamì—ì„œ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤.
    - Streamì€ ë‹¨ í•œ ë²ˆë§Œ ì†Œë¹„(íƒìƒ‰)í•  ìˆ˜ ìˆë‹¤.
    ```java
    List<String> title = Arrays.asList("java", "8");
    Stream<String> s = title.stream();
    s.forEach(System.out::println);
    s.forEach(System.out::println); // java.lang.IllegalStateException: stream has already been operated upon or closed
    ```
    - ë‚´ë¶€ì ìœ¼ë¡œ ë°˜ë³µí•œë‹¤.
- Stremì€ ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°ìœ¼ë¡œ ë‚˜ëˆ ì§„ë‹¤. ì¤‘ê°„ ì—°ì‚°ì€ ë‹¨ë§ ì—°ì‚°ì„ ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì— ì‹¤í–‰í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë¬´ ì—°ì‚°ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. (Lazy) ì¤‘ê°„ ì—°ì‚°ì„ í•©ì¹œ ë‹¤ìŒì— í•©ì³ì§„ ì¤‘ê°„ ì—°ì‚°ì„ ìµœì¢… ì—°ì‚°ìœ¼ë¡œ í•œ ë²ˆì— ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
  ```java
  List<String> names = menu.stream()
                                .filter(dish -> { // ì¤‘ê°„ ì—°ì‚°ìœ¼ë¡œ streamìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
                                  System.out.println("Filtering : " + dish.getName());
                                  return dish.getCalories() > 300;
                                })
                                .map(dish -> { // ì¤‘ê°„ ì—°ì‚°ìœ¼ë¡œ streamìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
                                  System.out.println("Mapping : " + dish.getName());
                                  return dish.getName();
                                }) 
                                // ë£¨í”„ í“¨ì „ : filterì™€ mapì€ ë‹¤ë¥¸ ì—°ì‚°ì´ì§€ë§Œ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.
                                .limit(3)   // ì‡¼íŠ¸ì„œí‚· : 300 ì¹¼ë¡œë¦¬ê°€ ë„˜ëŠ” ìš”ë¦¬ëŠ” ë§ì§€ë§Œ ì²˜ìŒë¶€í„° 3ê°œë§Œ ì„ íƒëœë‹¤.
                                .collect(toList()); // ìµœì¢… ì—°ì‚°ìœ¼ë¡œ stream ì´ì™¸ì˜ List, Integer, void ë“±ì´ ë°˜í™˜ëœë‹¤.
  System.out.println(names);
  ```
- Stream ì´ìš© ê³¼ì •
  - ì§ˆì˜ë¥¼ ìˆ˜í–‰í•  ë°ì´í„° ì†ŒìŠ¤
  - ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•  ì¤‘ê°„ ì—°ì‚° ì—°ê²°
  - ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ë§Œë“¤ ìµœì¢… ì—°ì‚°

- Stream ì—°ì‚° : ìƒíƒœ ì—†ìŒê³¼ ìƒíƒœ ìˆìŒ
  - ë‚´ë¶€ ìƒíƒœë¥¼ ê°–ì§€ ì•ŠëŠ” ì—°ì‚° : map, filterì™€ ê°™ì´ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì—ì„œ ìš”ì†Œë¥¼ ë°›ì•„ 0 ë˜ëŠ” ê²°ê³¼ë¥¼ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³´ë‚¸ë‹¤. ë‚´ë¶€ì ì¸ ê°€ë³€ ìƒíƒœë¥¼ ê°–ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê°€ì •í•˜ì— ìƒíƒœë¥¼ ê°–ì§€ ì•ŠëŠ” ì—°ì‚°ì´ë‹¤.
  - ë‚´ë¶€ ìƒíƒœë¥¼ ê°–ëŠ” ì—°ì‚°
    - reduce, sum, maxì™€ ê°™ì€ ì—°ì‚°ì€ ê²°ê³¼ë¥¼ ëˆ„ì í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë‚´ë¶€ ìƒíƒœê°€ í•„ìš”í•˜ë‹¤. Streamì—ì„œ ì²˜ë¦¬í•˜ëŠ” ìš”ì†Œ ìˆ˜ì™€ ê´€ê³„ì—†ì´ ë‚´ë¶€ ìƒíƒœì˜ í¬ê¸°ëŠ” í•œì •ë˜ì–´ ìˆë‹¤.
    - sorted, distinct ì™€ ê°™ì€ ì—°ì‚°ì€ Streamì˜ ê³¼ê±° ì´ë ¥ì„ ì•Œê³  ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ìš”ì†Œê°€ ë²„í¼ì— ì¶”ê°€ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ì´ ë•Œ ì—°ì‚°ì— í•„ìš”í•œ ë²„í¼ì˜ í¬ê¸°ê°€ ì •í•´ì ¸ ìˆì§€ ì•Šì•„ì„œ Streamì˜ í¬ê¸°ê°€ ì—„ì²­ í¬ê±°ë‚˜ ë¬´í•œì´ë©´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
---

## ë‚´ìƒê°
ğŸ’¡ ìë°”8ì—ì„œ ë©€í‹° ì½”ì–´ë¥¼ ê·¹ëŒ€í™”í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•˜ê²Œ ë˜ì—ˆë‹¤. ì˜ˆì „ë³´ë‹¤ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ë³´ë‹¤ ì‰½ê³  ëª…í™•í•˜ê²Œ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ìœ„ì˜ 3ê°€ì§€ í¬ì¸íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ `í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°`ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ì§¤ ìˆ˜ ìˆì—ˆê³  ê·¸ì— ë”°ë¼ ê³µìœ ëœ ê°€ë³€ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ë“± ì‹ ê²½ì“°ë©´ì„œ ì½”ë”©í•´ì•¼í•  ë¶€ë¶„ë“¤ì´ ë§ì•„ì§„ ê²ƒ ê°™ë‹¤. ì–´ë–»ê²Œë³´ë©´ ì½”ë“œê°€ ë” ë³µì¡í•´ì§€ê³  ì‹ ê²½ì¨ì•¼í•  ë¶€ë¶„ë“¤ì´ ë§ì•„ì§€ê² ì§€ë§Œ ì»´í“¨í„°ì˜ ìì›ì„ ë³´ë‹¤ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

ğŸ’¡ ìì£¼ ì“°ëŠ” í•¨ìˆ˜ ì •ë¦¬
  - Predicate : ì°¸ê±°ì§“ íŒë‹¨, filter, test, and, or 
  - Consumer : ê³µí†µ ì ìš©, forEach, accept
  - Function : íŠ¹ì • í•¨ìˆ˜ ì ìš©, map, apply, andThen, compose
  - Stream
    - ì¤‘ê°„ ì—°ì‚° : filter, sorted, map, district, limit
    - ìµœì¢… ì—°ì‚° : forEach, count, collect (groupingBy)

---
## ë©”ì„œë“œ ì°¸ì¡°
```java
Apple::getWeight // (Apple apple) -> apple.getWeight()
Thread.currentThread()::dumpStack  // () -> Thread.currentThread().dumpStac()
String::substring // (str, i) -> str.substring(i)
System.out::println // (String s) -> System.out.println(s)
this::isValidName // (String s) -> this.isValidName(s) 
```

--- 

## Sort
- comparing(), reversed(), thenComparing()
  
```java
List<JSONObject> jsonList = new ArrayList<>();
tmpJsonList.sort((JSONObject a, JSONObject b) -> {
  return a.getInt("choice_id") - b.getInt("choice_id");
});
tmpJsonList.sort(Comparator.comparing((JSONObject o) -> o.getInt("choice_id")));
tmpJsonList.sort(Comparator.comparing(Apple::getWeight));
List<JSONObject> stringList = new ArrayList<>();
stringList.sort((String str1, String str2) -> {
  if(str2.contains("Bad") || str2.contains("Awful"))
    return 1;
  else if(!str1.contains("Bad") && !str1.contains("Awful") && !str2.contains("Bad") && !str2.contains("Awful"))
    return 0;
  else
    return -1;
});
```
```java
// ì½”ë“œ ì „ë‹¬
public class AppleComparator implements Comparator<Apple> {
  public int compare(Apple a1, Apple a2) {
    return a1.getWeight().compareTo(a2.getWeight());
  }
}
inventory.sort(new AppleComparator());
// ìµëª… í´ë˜ìŠ¤ ì‚¬ìš©
inventory.sort(new Comparator<Apple>() {
  public int compare(Apple a1, Apple a2) {
    return a1.getWeight().compareTo(a2.getWeight());
  }
});
// ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©
inventory.sort((Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeigh()));
inventory.sort((a1, a2) -> a1.getWeight().compareTo(a2.getWeight()));
// ë©”ì„œë“œ ì°¸ì¡° ì‚¬ìš©
inventory.sort(comparing(Apple::getWeight));
// ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ í›„ ê°™ìœ¼ë©´ êµ­ê°€ë³„ ì •ë ¬
inventory.sort(comparing(Apple::getWeight)
                .reversed()
                .thenComparing(Apple::getCountry));
```

---

## Predicate (filter)
- ì ì–´ë„ í•œ ìš”ì†Œì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸

```java
public interface ApplePredicate {
  boolean test (Apple apple);
}
public List<Apple> filterApples(List<Apple> inventory, ApplePredicate p) {
  List<Apple> result = new ArrayList<>();
  for(Apple apple: inventory) {
    if(p.test(apple))
      result.add(apple);
  }
  return result;
}
public class AppleRedAndHeavyPredicate implements ApplePredicate {
  public boolean test(Apple apple) {
    return RED.equals(apple.getColor()) && apple.getWeight() > 150;
  }
}
List<Apple> redAndHeavyApples = filterApples(inventory,newAppleRedAndHeavyPredicate())
```
```java
@FunctionalInterface
public interface Predicate<T> {
  boolean test(T t);
}
public <T> List<T> filter(List<T> list, Predicate<T> p){
  List<T> results = new ArrayList<>();
  for(T t: list) {
    if(p.test(t)){
      results.add(t);
    }
  }
  return results;
}
Predicate<String> nonEmptyStringPredicate = (String s) -> !s.isEmpty();
List<String> nonEmpty = filter(listOfStrings, nonEmptyStringPredicate);
```

```java
public static void main(String[] args) {
  Predicate<Apple> predicateHeavyApple = (Apple a) -> a.getWeight() > 150;
  List<Apple> result = filterAppleWeight(inventory, predicateHeavyApple
                                                        .and((Apple a) -> a.getName().equals("3")));
  System.out.println("=======================");
  result.forEach(System.out::println);
}

static List<Apple> filterAppleWeight(List<Apple> list, Predicate<Apple> p{
  List<Apple> result = new ArrayList<>();
  for(Apple apple : list){
    if(p.test(apple))
      result.add(apple);
  }
  return result;
};
```
```java
// ê¸°ì¡´ ë°©ì‹
File[] hiddenFiles = new File(".").listFiles(new FilesFilter() {
  public boolean accept(File file) {
    return file.isHidden();
  }
});
// ìë°”8 ë©”ì„œë“œ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•œ ë°©ì‹
File[] hiddenFiles = new File(".").listFiles(File::isHidden);
posts.forEach(System.out::print);
```

```java
// ê¸°ì¡´ ë°©ì‹
public static List<Apple> filterGreenApples(List<Apple> inventory) {
  List<Apple> result = new ArrayList<>();
  for(Apple apple : inventory) {
    if(GREEN.equals(apple.getColor())){
      result.add(apple);
    }
  }
  return result;
}
public static List<Apple> filterHeavyApples(List<Apple> inventory) {
  List<Apple> result = new ArrayList<>();
  for(Apple apple : inventory) {
    if(apple.getWeight() > 150){
      result.add(apple);
    }
  }
  return result;
}
// ìë°”8 ë°©ì‹
public static boolean isGreenApple(Apple apple) {
  return GREEN.equals(apple.getColor());
}
public static boolean isHeavyApple(Apple apple) {
  return apple.getWeight() > 150;
}

// ì¸ìˆ˜ë¡œ ê°’ì„ ë°›ì•„ì„œ true, falseë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
public interface Predicate<T> {
  boolean test(T t);
}
static List<Apple> filterApples(List<Apple> inventory, Predicate<Apple>p) {
  List<Apple> result = new ArrayList<>();
  for(Apple apple : inventory) {
    if(p.test(apple)) {
      result.add(apple);
    }
  }
  return result;
}
filterApples(inventory, Apple::isGreenApple);
filterApples(inventory, Apple::isHeavyApple);
// isGreenApple, isHeavyApple í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ìƒëµí•˜ê³  ëŒë‹¤ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.
filterApples(inventory, (Apple a) -> GREEN.equals(a.getColor()));
filterApples(inventory, (Apple a) -> a.getWeight() > 150);
```

```java
Map<Curreny, List<Transaction>> transactionByCurrencies = new HashMap<>();
for(Transaction transaction : transactions) {
  if(transaction.getPrice() > 1000) {
    Currency currency = transaction.getCurrency();
    List<Transaction> transactionsForCurrency = transactionByCurrencies.get(currency);
    if(transactionByCurrency == null) {
      transactionByCurrency = new ArrayList<>();
      transactionByCurrencies.put(currency, transactionByCurrency);
    }
    transactionByCurrency.add(transaction);
  }
}
```

---

## Consumer (forEach)
- ì „ì²´ íƒìƒ‰í•˜ë©´ì„œ í•¨ìˆ˜ ì‹¤í–‰

```java
@FunctionalInterface
public interface Consumer<T> {
  void accept(T t);
}
public <T> void forEach(List<T> list, Consumer<T> c){
  for(T t: list) {
    c.accept(t);
  }
}
forEach(
  Arrays.asList(1,2,3,4,5),
  (Integer i) -> System.out.println(i);
)
```

---

## Function (map)
- ì „ì²´ë¥¼ íƒìƒ‰í•˜ë©´ì„œ í•¨ìˆ˜ ì ìš©

```java
@FunctionalInterface
public interface Function<T, R> {
  R apply(T t);
}
public <T, R> List<R> map(List<T> list, Function<T, R> f) {
  List<R> result = new ArrayList<>();
  for(T t: list) {
    result.add(f.apply(t));
  }
  return result;
}
List<Integer> result = map(
                            Arrays.asList("lambda", "in", "action"),
                            (String s) -> s.length()
);
Function<Integer, Integer> f = x -> x + 1;
Function<Integer, Integer> g = x -> x * 2;
Function<Integer, Integer> h = f.andThen(g);
Function<Integer, Integer> i = f.compose(g);
h.apply(1); // 4    g(f(x))
i.apply(1); // 3    f(g(x))
```
 ìƒì„±ì ì°¸ì¡°
```java
public interface AppleConstructor<T, U, V, R> {
  R apply(T t, U u, V v);
}

public void static main(String[] agrs) {
  AppleConstructor<String, Integer, Integer, Apple> apple = Apple::new;
  // AppleCOnstructor<String, Integer, Integer, Apple> apple = (name, weight, price) -> new Apple(name, weight, price);
  apple.apply("tomato", 10, 100);
}
```
  
---

## Stream
- ë°ì´í„°ë¥¼ íˆ¬ëª…í•˜ê³  ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- #### parallelStream
```java
import static java.util.stream.Collectors.groupingBy;
Map<Currency, List<Transaction>> transactionsByCurrencies =
  transactions.stream()
                  .filter((Transaction t) -> t.getPrice() > 1000)
                  .collect(Collectors.groupingBy(Transaction::getCurrency));
List<Apple> heavyApples = inventory.stream()    // ìˆœì°¨ì²˜ë¦¬ stream
                                        .filter((Apple a) -> a.getWeight > 150)
                                        .collect(Collectors.toList());
List<Apple> heavyApples = inventory.parallelStream()  // ë³‘ë ¬ì²˜ë¦¬ stream
                                        .filter((Apple a) -> a.getWeight > 150)
                                        .collect(Collectors.toList());  
```
- #### groupingBy
```java
List<String> filteredMenus = menus.parallelStream()
                                      .filter(dish -> dish.getCalories() < 400)
                                      .sorted(Comparator.comparing(Dish::getCalories))
                                      .map(Dish::getName)
                                      .collect(Collectors.toList());
Map<Integer, List<Apple>> groupApple = inventory.stream()
                                                    .collect(Collectors.groupingBy(Apple::getWeight));
System.out.println(groupApple);
```
- #### takeWhile : ê±°ì§“ì´ ë˜ë©´ ì‘ì—…ì„ ì¤‘ë‹¨í•˜ê³  ì°¸ì´ì—ˆë˜ ìš”ì†Œë¥¼ ì €ì¥
```java
/*
 * takeWhile
 * ì´ë¯¸ ì •ë ¬ì´ ë˜ì–´ ìˆëŠ” ê²½ìš°ì— filterë¥¼ ì‚¬ìš©í•˜ë©´ ì „ì²´ ìŠ¤íŠ¸ë¦¼ì„ ë°˜ë³µí•˜ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë°ì´í„°ê¹Œì§€ ì²´í¬í•´ì•¼í•œë‹¤.
 * takeWhileì„ ì‚¬ìš©í•˜ë©´ ì›í•˜ëŠ” ì¡°ê±´ì´ ëì„ ë•Œ ë°˜ë³µ ì‘ì—…ì„ ì¤‘ë‹¨í•˜ê¸° ë•Œë¬¸ì— í° ë¦¬ìŠ¤íŠ¸ë¥¼ ì²´í¬í•  ë•Œ ìœ ìš©í•˜ê²Œ ì“°ì¼ ìˆ˜ ìˆë‹¤.
 */
List<Dish> filteredMenu = specialMenu.stream()
                                        .takeWhile(dish -> dish.getCalories() < 320)
                                        .collect(toList());
```

- #### dropwhile : ê±°ì§“ì´ ë˜ë©´ ì‘ì—…ì„ ì¤‘ë‹¨í•˜ê³  ë‚¨ì€ ìš”ì†Œë¥¼ ì €ì¥
```java
/*
 * dropWhile
 * ë‚˜ë¨¸ì§€ ìš”ì†Œë“¤ì€ dropWhileì„ ì‚¬ìš©í•´ì„œ ì„ íƒí•  ìˆ˜ ìˆë‹¤.
 * ê±°ì§“ì´ ë˜ë©´ ê·¸ ì§€ì ì—ì„œ ì‘ì—…ì„ ì¤‘ë‹¨í•˜ê³  ë‚¨ì€ ëª¨ë“  ìš”ì†Œë¥¼ ë²„ë¦°ë‹¤.
 */
 List<Dish> filteredMenu = specialMenu.stream()
                                        .dropWhile(dish -> dish.getCalories() < 320)
                                        .collect(toList());
```

- #### limit, skip
```java
/*
 * limit, skip
 */
 menu.stream()
        .sorted(Comparator.comparing(Dish::getCalories))
        .takeWhile(dish -> dish.getCalories() < 500)
        .skip(1)
        .limit(3)
        .collect(Collectors.toList())
        .forEach(System.out::println);
```

- #### flatMap : stream í‰ë©´í™”
```java
/*
 * flatMap : Stream í‰ë©´í™”
 */ 
List<String> words = Arrays.asList("Hello", "World");

// 1. ê°ì²´ê°€ string[] ë¼ì„œ ë¬¸ì œ 
System.out.println("=================== 1");
List<String[]> listStringArray = words.stream()
        .map(w -> w.split("")) // string[] ì„ ì „ë‹¬í•¨
        .distinct()
        .collect(Collectors.toList());
for(String[] item : listStringArray){
    Arrays.asList(item).forEach(System.out::print);
    System.out.println();
}

// 2. ê° ë°°ì—´ì„ ë³„ë„ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ìƒì„±
System.out.println("=================== 2");
List<Stream<String>> listStreamString = words.stream()
        .map(w -> w.split("")) // string[] ì„ ì „ë‹¬í•¨
        .map(Arrays::stream) // ê° ë°°ì—´ì„ streamìœ¼ë¡œ ìƒì„±
        .distinct()
        .collect(Collectors.toList());
listStreamString.stream()
    .forEach(stream -> {
        stream.forEach(System.out::print);
        System.out.println();
    });

// 3. flatMap ì‚¬ìš©
System.out.println("=================== 3");
words.stream()
        .map(w -> w.split("")) // string[] ì„ ì „ë‹¬í•¨
        .flatMap(Arrays::stream) // ìƒì„± ëœ streamì„ í•˜ë‚˜ì˜ streamìœ¼ë¡œ í‰ë©´í™”
        .distinct()
        .collect(Collectors.toList()) // List<String>
        .forEach(System.out::print);

```

- #### anyMatch, allMatch, noneMatch
```java
/*
 * anyMatch, allMatch, noneMatch
 * short circuit í‰ê°€ ë°©ì‹ì„ ì‚¬ìš©í•¨
 */ 
if(menu.stream().anyMatch(Dish::isVegetarian)){
    System.out.println("This group has more than one vegetarian menu.");
}
if(!menu.stream().allMatch(Dish::isVegetarian)){
    System.out.println("This group has no vegetarian menu.");
}
if(menu.stream().allMatch(d -> d.getCalories() < 1000))
    System.out.println("All of menus is under 1000 calories.");if(menu.stream().noneMatch(d -> d.getCalories() >= 1000))
    System.out.println("All of menus is under 1000 calories.");
```

- #### findAny, findFirst
```java
/*
 * findAny, findFirst
 * ë³‘ë ¬ ì‹¤í–‰ì—ì„  findAnyë¥¼ ì‚¬ìš©í•œë‹¤.
 * Optional -> isPresent, ifPresent
 */
Optional<Dish> dish = menu.stream()
                            .filter(d -> d.getCalories() > 1000)
                            .findAny();
System.out.println(dish);
menu.stream()
        .filter(d -> d.getCalories() > 1000)
        .findAny()
        .ifPresent(System.out::println); // ê°’ì´ ì—†ìœ¼ë©´ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ.

List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
numbers.stream()
            .map(n -> n * n)
            .filter(n -> n % 3 == 0)
            .findFirst()
            .ifPresent(System.out::println);
```

- #### reduce
```java
/*
 * reduce (ì´ˆê¸°ê°’, ë‘ ìš”ì†Œë¥¼ ì¡°í•©í•´ì„œ ìƒˆë¡œìš´ ê°’ì„ ë§Œë“œëŠ” ì—°ì‚°)
 *   a = ì´ˆê¸°ê°’
 *   b = streamì— ìˆëŠ” ê°’
 *   ì—°ì‚° = a, bì— ëŒ€í•´ì„œ ì—°ì‚°ì„ ëˆ„ì í•´ì„œ ì‹¤í–‰í•œë‹¤.
 * 
 * ê°€ë³€ ëˆ„ì ì íŒ¨í„´ì€ ë³‘ë ¬ì²˜ë¦¬ì— ê±°ë¦¬ê°€ ë©€ë‹¤. reduce ê°™ì€ ìƒˆë¡œìš´ íŒ¨í„´ì´ í•„ìš”í•˜ë‹¤.
 */
System.out.println(numbers.stream().reduce(0, (a, b) -> a + b)); 
System.out.println(numbers.stream().reduce(0, Integer::sum)); 

System.out.println(numbers.stream().reduce(1, (a, b) -> a * b)); 
System.out.println(numbers.stream().reduce((a, b) -> a * b));  // Optional

// ìµœëŒ€ê°’, ìµœì†Œê°’
System.out.println(numbers.stream().reduce(Integer::max)); 
System.out.println(numbers.stream().reduce(Integer::min)); 

// reduce pattern (map + reduce)
System.out.println(menu.stream()
                            .map(d -> 1)
                            .reduce(0, Integer::sum));
```


--- 
  () -> {}
  
  () -> "ê°’" 
  
  T : type
  
  E : Element
  
  K : Key
  
  V : Value
  
  N : Number


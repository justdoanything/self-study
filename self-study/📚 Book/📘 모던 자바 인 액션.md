# ëª¨ë˜ ìë°” ì¸ ì•¡ì…˜ / ë¼ìš¸-ê²Œì´ë¸Œë¦¬ì–¼ ìš°ë¥´ë§ˆ, ë§ˆë¦¬ì˜¤ í‘¸ìŠ¤ì½”, ì•¨ëŸ° ë§ˆì´í¬ë¡œí”„íŠ¸ ì§€ìŒ / ìš°ì •ì€ ì˜®ê¹€ / í•œë¹›ë¯¸ë””ì–´

## ê°œë…
- Stream API
  - Stream : í•œ ë²ˆì— í•œ ë²ˆì”© ë§Œë“¤ì–´ì§€ëŠ” ì—°ì†ì ì¸ ë°ì´í„° í•­ëª©ë“¤ì˜ ëª¨ì„. ì´ë¡ ì ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì€ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì—ì„œ ë°ì´í„°ë¥¼ í•œ ê°œì”© ì½ì–´ ë“¤ì´ë©° ë§ˆì°¬ê°€ì§€ë¡œ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•œ ê°œì”© ê¸°ë¡í•œë‹¤.
  - Unix ëª…ë ¹ì–´ ì¤‘ì—ì„œ `cat`ì€ ë‘ íŒŒì¼ì„ ì—°ê²°í•´ì„œ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•˜ê³  `tail -3`ì€ ìŠ¤íŠ¸ë¦¼ì˜ ë§ˆì§€ë§‰ 3ê°œ í–‰ì„ ì œê³µí•œë‹¤. `|` ì—°ì‚°ìë¡œ ì—°ê²°ë˜ ìˆëŠ” ì—¬ëŸ¬ ëª…ë ¹ì–´ëŠ” ë³‘ë ¬ì ìœ¼ë¡œ ë™ì‹œì— ìˆ˜í–‰ëœë‹¤.
  - ìë°”8ì—ì„œëŠ” `java.util.stream` íŒ¨í‚¤ì§€ì— Stream APIê°€ ì¶”ê°€ë˜ì—ˆê³  thread ë¼ëŠ” ë³µì¡í•œ ì‘ì—…ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ì„œ ê³µì§œë¡œ ë³‘ë ¬ì„±ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
- ë™ì  íŒŒë¼ë¯¸í„°í™”ë¡œ Methodì— Codeë¥¼ ì „ë‹¬í•˜ëŠ” ê¸°ë²•
  - ë™ì  íŒŒë¼ë¯¸í„°í™” : ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ë©”ì„œë“œì˜ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.
- Interfaceì˜ Default Method
  - ìŠ¤íŠ¸ë¦¼ ë©”ì„œë“œë¡œ ì „ë‹¬í•˜ëŠ” ì½”ë“œëŠ” ë‹¤ë¥¸ ì½”ë“œì™€ ë™ì‹œì— ì‹¤í–‰í•˜ë”ë¼ë„ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ë³´í†µ ë‹¤ë¥¸ ì½”ë“œì™€ ë™ì‹œì— ì‹¤í–‰ë˜ë”ë¼ë„ ì•ˆì „í•˜ê²Œ ì‹¤í–‰í•˜ë ¤ë©´ ê³µìœ ëœ ê°€ë³€ ë°ì´í„°ì—x ì ‘ê·¼í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.
  - ìˆœìˆ˜ í•¨ìˆ˜, ë¶€ì‘ìš© ì—†ëŠ” í•¨ìˆ˜, ìƒíƒœ ì—†ëŠ” í•¨ìˆ˜
  - Collection APIì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆëŠ” ìˆ˜ë§ì€ Collection í”„ë ˆì„ì›Œí¬ê°€ ì¡´ì¬í•œë‹¤. ì´ ì¸í„°í˜ì´ìŠ¤ì— ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ëª¨ë“  í´ë˜ìŠ¤ì— ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ì•¼í•˜ëŠ” ë¬¸ì œì— ë´‰ì°©í•œë‹¤. â†’ ìë°” 8 ì—ì„œëŠ” êµ¬í˜„ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ë©”ì„œë“œë¥¼ ì¸í„°í˜ì´ìŠ¤ì— ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. â†’ Default Method
  - ìë°” 8 ì´ì „ì—ëŠ” Listë¥¼ êµ¬í˜„í•˜ëŠ” ëª¨ë“  í´ë˜ìŠ¤ê°€ sortë¥¼ êµ¬í˜„í•´ì•¼ í–ˆì§€ë§Œ ìë°” 8 ë¶€í„°ëŠ” default sortë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
    ```java
    default void sort(Comparator<? super E> c){
      Collections.sort(this, c);
    }
    ```

- í¬í‚¹ ë‹¨ê³„ : ì˜ˆë¥¼ë“¤ì–´ ë¦¬ìŠ¤íŠ¸ë¥¼ í•„í„°ë§í•  ë•Œ í•œ CPUëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì•ë¶€ë¶„ì„ ì²˜ë¦¬í•˜ê³  ë‹¤ë¥¸ CPUëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ë’·ë¶€ë¶„ì„ ì²˜ë¦¬í•˜ë„ë¡ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.

ğŸ’¡ ë‚´ìƒê° : ìë°”8ì—ì„œ ë©€í‹° ì½”ì–´ë¥¼ ê·¹ëŒ€í™”í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•˜ê²Œ ë˜ì—ˆë‹¤. ì˜ˆì „ë³´ë‹¤ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ë³´ë‹¤ ì‰½ê³  ëª…í™•í•˜ê²Œ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ìœ„ì˜ 3ê°€ì§€ í¬ì¸íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ `í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°`ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ì§¤ ìˆ˜ ìˆì—ˆê³  ê·¸ì— ë”°ë¼ ê³µìœ ëœ ê°€ë³€ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ë“± ì‹ ê²½ì“°ë©´ì„œ ì½”ë”©í•´ì•¼í•  ë¶€ë¶„ë“¤ì´ ë§ì•„ì§„ ê²ƒ ê°™ë‹¤. ì–´ë–»ê²Œë³´ë©´ ì½”ë“œê°€ ë” ë³µì¡í•´ì§€ê³  ì‹ ê²½ì¨ì•¼í•  ë¶€ë¶„ë“¤ì´ ë§ì•„ì§€ê² ì§€ë§Œ ì»´í“¨í„°ì˜ ìì›ì„ ë³´ë‹¤ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

- í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ : ì¶”ìƒ ë©”ì„œë“œê°€ ì˜¤ì§ í•˜ë‚˜ì¸ ì¸í„°í˜ì´ìŠ¤

- í˜•ì‹ ê²€ì‚¬ : ê¸°ëŒ€ë˜ëŠ” ëŒë‹¤ í‘œí˜„ì˜ í˜•ì‹
  - Predicate<String> p = s -> list.add(s); // boolean ë°˜í™˜
  - Consumer<String> b = s -> list.add(s);  // boolean ë°˜í™˜
  - Object o = () -> { System.out.println("example")}; // ì—ëŸ¬ë°œìƒ
  - Object o = (Runnable) () -> { System.out.println("example")}; // ê°€ëŠ¥

- í˜•ì‹ ì¶”ë¡  : ì»´íŒŒì¼ëŸ¬ëŠ” ëŒë‹¤ í‘œí˜„ì‹ì˜ íŒŒë¼ë¯¸í„° í˜•ì‹ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ëŒë‹¤ ë¬¸ë²•ì—ì„œ ìƒëµí•  ìˆ˜ ìˆë‹¤.
  - Comparator<Apple> c = (Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight()); // í˜•ì‹ ì¶”ë¡ ì„ í•˜ì§€ ì•ŠìŒ
  - Comparator<Apple> c = (a1, a2) -> a1.getWeight().compareTo(a2.getWeight()); // í˜•ì‹ ì¶”ë¡ 

- ëŒë‹¤ ìº¡ì³ë§(ì§€ì—­ ë³€ìˆ˜ ì‚¬ìš©) : ë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ finalë¡œ ì„ ì–¸ë˜ì–´ ìˆê±°ë‚˜ final ì²˜ëŸ¼ ê°’ì´ ë³€ê²½ë˜ì–´ì„  ì•ˆëœë‹¤.
  - ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ëŠ” í™ì— ì €ì¥ë˜ê³  ì§€ì—­ ë³€ìˆ˜ëŠ” ìŠ¤íƒì— ì €ì¥ëœë‹¤. ì›ë˜ ë³€ìˆ˜ì— ì ‘ê·¼ì„ í—ˆìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ììœ  ì§€ì—­ ë³€ìˆ˜`(íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì§„ ë³€ìˆ˜ê°€ ì•„ë‹Œ ì™¸ë¶€ì—ì„œ ì •ì˜ëœ ë³€ìˆ˜)`ì˜ ë³µì‚¬ë³µì„ ì œê³µí•œë‹¤.
  - ë”°ë¼ì„œ ë³µì‚¬ë³¸ì˜ ê°’ì´ ë°”ë€Œì§€ ì•Šì•„ì•¼ í•˜ë¯€ë¡œ ì§€ì—­ ë³€ìˆ˜ì—ëŠ” í•œ ë²ˆë§Œ ê°’ì„ í• ë‹¹í•´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ìƒê¸´ ê²ƒì´ë‹¤.

---

- ### ë©”ì„œë“œ ì°¸ì¡° (`::`) : ì´ ë©”ì„œë“œë¥¼ ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ë¼
  ```java
  Apple::getWeight // (Apple apple) -> apple.getWeight()
  Thread.currentThread()::dumpStack  // () -> Thread.currentThread().dumpStack()
  String::substring // (str, i) -> str.substring(i)
  System.out::println // (String s) -> System.out.println(s)
  this::isValidName // (String s) -> this.isValidName(s) 
  ```

--- 

- ### Sort
  ```java
  List<JSONObject> jsonList = new ArrayList<>();
  tmpJsonList.sort((JSONObject a, JSONObject b) -> {
    return a.getInt("choice_id") - b.getInt("choice_id");
  });
  tmpJsonList.sort(Comparator.comparing((JSONObject o) -> o.getInt("choice_id")));
  tmpJsonList.sort(Comparator.comparing(Apple::getWeight));

  List<JSONObject> stringList = new ArrayList<>();
  stringList.sort((String str1, String str2) -> {
    if(str2.contains("Bad") || str2.contains("Awful"))
      return 1;
    else if(!str1.contains("Bad") && !str1.contains("Awful") && !str2.contains("Bad") && !str2.contains("Awful"))
      return 0;
    else
      return -1;
  });
  ```
  ```java
  // ì½”ë“œ ì „ë‹¬
  public class AppleComparator implements Comparator<Apple> {
    public int compare(Apple a1, Apple a2) {
      return a1.getWeight().compareTo(a2.getWeight());
    }
  }
  inventory.sort(new AppleComparator());

  // ìµëª… í´ë˜ìŠ¤ ì‚¬ìš©
  inventory.sort(new Comparator<Apple>() {
    public int compare(Apple a1, Apple a2) {
      return a1.getWeight().compareTo(a2.getWeight());
    }
  });

  // ëŒë‹¤ í‘œí˜„ì‹ ì‚¬ìš©
  inventory.sort((Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight()));
  inventory.sort((a1, a2) -> a1.getWeight().compareTo(a2.getWeight()));

  // ë©”ì„œë“œ ì°¸ì¡° ì‚¬ìš©
  inventory.sort(comparing(Apple::getWeight));

  // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ í›„ ê°™ìœ¼ë©´ êµ­ê°€ë³„ ì •ë ¬
  inventory.sort(comparing(Apple::getWeight)
                  .reversed()
                  .thenComparing(Apple::getCountry));
  ```

---

- ### Predicate (filter)
  ```java
  public interface ApplePredicate {
    boolean test (Apple apple);
  }

  public List<Apple> filterApples(List<Apple> inventory, ApplePredicate p) {
    List<Apple> result = new ArrayList<>();
    for(Apple apple: inventory) {
      if(p.test(apple))
        result.add(apple);
    }
    return result;
  }

  public class AppleRedAndHeavyPredicate implements ApplePredicate {
    public boolean test(Apple apple) {
      return RED.equals(apple.getColor()) && apple.getWeight() > 150;
    }
  }

  List<Apple> redAndHeavyApples = filterApples(inventory, new AppleRedAndHeavyPredicate())
  ```

  ```java
  @FunctionalInterface
  public interface Predicate<T> {
    boolean test(T t);
  }

  public <T> List<T> filter(List<T> list, Predicate<T> p){
    List<T> results = new ArrayList<>();
    for(T t: list) {
      if(p.test(t)){
        results.add(t);
      }
    }
    return results;
  }
  Predicate<String> nonEmptyStringPredicate = (String s) -> !s.isEmpty();
  List<String> nonEmpty = filter(listOfStrings, nonEmptyStringPredicate);
  ```
  
  ```java
  public static void main(String[] args) {
    Predicate<Apple> predicateHeavyApple = (Apple a) -> a.getWeight() > 150;
    List<Apple> result = filterAppleWeight(inventory, predicateHeavyApple
                                                          .and((Apple a) -> a.getName().equals("3")));
    System.out.println("=======================");
    result.forEach(System.out::println);
  }
  
  static List<Apple> filterAppleWeight(List<Apple> list, Predicate<Apple> p){
    List<Apple> result = new ArrayList<>();
    for(Apple apple : list){
      if(p.test(apple))
        result.add(apple);
    }
    return result;
  };
  ```

  ```java
  // ê¸°ì¡´ ë°©ì‹
  File[] hiddenFiles = new File(".").listFiles(new FilesFilter() {
    public boolean accept(File file) {
      return file.isHidden();
    }
  });

  // ìë°”8 ë©”ì„œë“œ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•œ ë°©ì‹
  File[] hiddenFiles = new File(".").listFiles(File::isHidden);

  posts.forEach(System.out::print);
  ```
  
  ```java
  // ê¸°ì¡´ ë°©ì‹
  public static List<Apple> filterGreenApples(List<Apple> inventory) {
    List<Apple> result = new ArrayList<>();

    for(Apple apple : inventory) {
      if(GREEN.equals(apple.getColor())){
        result.add(apple);
      }
    }
    return result;
  }
  public static List<Apple> filterHeavyApples(List<Apple> inventory) {
    List<Apple> result = new ArrayList<>();

    for(Apple apple : inventory) {
      if(apple.getWeight() > 150){
        result.add(apple);
      }
    }
    return result;
  }


  // ìë°”8 ë°©ì‹
  public static boolean isGreenApple(Apple apple) {
    return GREEN.equals(apple.getColor());
  }

  public static boolean isHeavyApple(Apple apple) {
    return apple.getWeight() > 150;
  }
  
  // ì¸ìˆ˜ë¡œ ê°’ì„ ë°›ì•„ì„œ true, falseë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
  public interface Predicate<T> {
    boolean test(T t);
  }

  static List<Apple> filterApples(List<Apple> inventory, Predicate<Apple> p) {
    List<Apple> result = new ArrayList<>();
    for(Apple apple : inventory) {
      if(p.test(apple)) {
        result.add(apple);
      }
    }
    return result;
  }

  filterApples(inventory, Apple::isGreenApple);
  filterApples(inventory, Apple::isHeavyApple);

  // isGreenApple, isHeavyApple í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ìƒëµí•˜ê³  ëŒë‹¤ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.
  filterApples(inventory, (Apple a) -> GREEN.equals(a.getColor()));
  filterApples(inventory, (Apple a) -> a.getWeight() > 150);
  ```
  
  ```java
  Map<Curreny, List<Transaction>> transactionByCurrencies = new HashMap<>();
  for(Transaction transaction : transactions) {
    if(transaction.getPrice() > 1000) {
      Currency currency = transaction.getCurrency();
      List<Transaction> transactionsForCurrency = transactionByCurrencies.get(currency);
      if(transactionByCurrency == null) {
        transactionByCurrency = new ArrayList<>();
        transactionByCurrencies.put(currency, transactionByCurrency);
      }
      transactionByCurrency.add(transaction);
    }
  }

  // ìŠ¤íŠ¸ë¦¼ API ì‚¬ìš©
  import static java.util.stream.Collectors.groupingBy;
  Map<Currency, List<Transaction>> transactionsByCurrencies =
    transactions.stream()
                    .filter((Transaction t) -> t.getPrice() > 1000)
                    .collect(Collectors.groupingBy(Transaction::getCurrency));

  List<Apple> heavyApples = inventory.stream()    // ìˆœì°¨ì²˜ë¦¬ stream
                                          .filter((Apple a) -> a.getWeight > 150)
                                          .collect(Collectors.toList());

  List<Apple> heavyApples = inventory.parallelStream()  // ë³‘ë ¬ì²˜ë¦¬ stream
                                          .filter((Apple a) -> a.getWeight > 150)
                                          .collect(Collectors.toList());  
  ```

---

- ### Consumer (forEach)
  ```java
  @FunctionalInterface
  public interface Consumer<T> {
    void accept(T t);
  }

  public <T> void forEach(List<T> list, Consumer<T> c){
    for(T t: list) {
      c.accept(t);
    }
  }

  forEach(
    Arrays.asList(1,2,3,4,5),
    (Integer i) -> System.out.println(i);
  )
  ```

---

- ### Function (map)
  ```java
  @FunctionalInterface
  public interface Function<T, R> {
    R apply(T t);
  }

  public <T, R> List<R> map(List<T> list, Function<T, R> f) {
    List<R> result = new ArrayList<>();
    for(T t: list) {
      result.add(f.apply(t));
    }
    return result;
  }

  List<Integer> result = map(
                              Arrays.asList("lambda", "in", "action"),
                              (String s) -> s.length()
  );
  ```
  

  () -> {}
  () -> "ê°’"
  T : type
  E : Element
  K : Key
  V : Value
  N : Number

